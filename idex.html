<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Reaction Duel + Dice + Password Lock (Single Roll)</title>

<style>
    body {
        background: #0d0000;
        color: #ff4d4d;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 30px;
        text-shadow: 0 0 6px #ff1c1c;
    }

    h1 {
        margin-bottom: 15px;
        font-size: 40px;
        text-shadow: 0 0 12px #ff0000;
    }

    button {
        padding: 15px 30px;
        font-size: 20px;
        border: 2px solid #ff1c1c;
        border-radius: 8px;
        cursor: pointer;
        background: #250000;
        color: #ffb3b3;
        margin: 10px;
        transition: 0.2s;
        box-shadow: 0 0 12px #ff1c1c55;
    }
    button[disabled]{
        opacity: 0.45;
        cursor: default;
        transform: none;
        box-shadow: none;
    }
    button:hover:not([disabled]) {
        background: #400000;
        transform: scale(1.05);
        box-shadow: 0 0 20px #ff1c1c;
    }

    #gameArea, 
    #punishPage, 
    #passwordSetPage, 
    #dicePage, 
    #lockedPage {
        display: none;
        margin-top: 40px;
    }

    #signal {
        margin-top: 40px;
        font-size: 50px;
        font-weight: bold;
        height: 80px;
    }

    #punishBox {
        background: #1b0000;
        padding: 25px;
        border-radius: 10px;
        margin-top: 30px;
        border: 2px solid #700000;
        box-shadow: 0 0 20px #ff000055;
        width: 70%;
        margin-left: auto;
        margin-right: auto;
        font-size: 22px;
        color: #ffdddd;
    }

    #diceResult {
        margin-top: 25px;
        font-size: 34px;
        font-weight: bold;
        text-shadow: 0 0 12px #ff4444;
    }

    /* LOCK SCREEN */
    #lockedPage {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(60,0,0,0.95);
        color: #ff5a5a;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-shadow: 0 0 12px #ff0000;
        z-index: 9999;
        padding: 20px;
    }

    #lockedPage h1 {
        font-size: 48px;
        color: #ff1a1a;
        text-shadow: 0 0 20px #ff0000;
        margin-bottom: 25px;
    }

    input {
        padding: 10px 15px;
        font-size: 18px;
        border-radius: 8px;
        border: 2px solid #ff0000;
        outline: none;
        background: #2b0000;
        color: #ffcccc;
        margin-top: 10px;
        text-align: center;
        box-shadow: 0 0 10px #ff000055;
    }

    .lockInfo {
        font-size: 22px;
        margin-top: 10px;
        color: #ffb3b3;
        text-shadow: 0 0 12px #ff4444;
    }

    .note { font-size: 14px; color: #ffb3b3; margin-top: 10px; opacity: 0.9; }
</style>
</head>
<body>

<h1>REACTION DUEL</h1>

<button onclick="startDuel()">Mulai Duel</button>

<!-- GAME AREA -->
<div id="gameArea">
    <h2>Bersiap...</h2>
    <div id="signal"></div>
    <p>P1 = tekan <b>A</b> | P2 = tekan <b>L</b></p>
</div>

<!-- PUNISH PAGE -->
<div id="punishPage">
    <h2>Pemain Kalah:</h2>
    <h3 id="loserName"></h3>
    <div id="punishBox"></div>
    <button onclick="showPasswordSet()">Lanjut Buat Password</button>
</div>

<!-- PASSWORD SET -->
<div id="passwordSetPage">
    <h2>Pemenang, buat password untuk mengunci halaman:</h2>
    <input id="passInput" type="password" placeholder="Password...">
    <br><br>
    <button onclick="setPassword()">Set Password</button>
</div>

<!-- DICE PAGE -->
<div id="dicePage">
    <h2>Lempar Dadu (hanya 1 kali)</h2>
    <button id="rollBtn" onclick="rollDice()">Lempar!</button>
    <div id="diceResult"></div>
    <br>
    <button id="lockBtn" onclick="lockScreen()" disabled>Kunci Halaman</button>
</div>

<!-- LOCKED PAGE -->
<div id="lockedPage">
    <h1>HALAMAN TERKUNCI</h1>
    <div class="lockInfo" id="lockedLoser"></div>
    <div class="lockInfo" id="lockedPunish"></div>
    <div class="lockInfo" id="lockedDuration"></div>
    <br><br>
    <input type="password" id="unlockInput" placeholder="Password...">
    <br><br>
    <button onclick="unlock()">UNLOCK</button>
    <div class="note">Setiap kali memasukkan password salah, durasi bertambah +2 menit.</div>
</div>

<script>
// ======================
// LIST HUKUMAN (1 ARRAY)
// ======================
const PUNISH_LIST = [
        "bdsm full tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full  tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full 5 jam tanpa istirahat.",
    "anal punishment 30 menit",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "vibrator 1x24 jam",
    "Push up 10x",
    "Jongkok 20x",
    "Plank 1 menit",
    "Lari di tempat 30 detik",
    "Diam tanpa gerak 1 menit",
    "Lompat 15x"
];

// ======================
// VARIABLE GAME
// ======================
let ready = false;
let winner = null;
let loser = null;
let lockPassword = "";
let finalDuration = 0;
let diceRolled = false;

// Key untuk localStorage
const STORAGE_KEY = "duel_locked_state_v1";

// ======================
// INISIALISASI (panggil saat load)
// ======================
function initGame() {
    // sembunyikan semua halaman terlebih dahulu
    document.querySelectorAll("#punishPage, #passwordSetPage, #dicePage, #lockedPage")
        .forEach(el => el.style.display = "none");

    document.getElementById("gameArea").style.display = "block";
    document.getElementById("rollBtn").disabled = false;
    document.getElementById("lockBtn").disabled = true;
    document.getElementById("diceResult").innerHTML = "";
    document.getElementById("signal").textContent = "Tekan Start untuk memulai";
    document.getElementById("signal").style.color = "#333";

    // load state dari localStorage jika ada
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) {
        try {
            const s = JSON.parse(raw);
            if (s && s.locked) {
                // restore tampilan locked
                loser = s.loser || "P?"; 
                finalDuration = s.finalDuration || 0;
                lockPassword = s.lockPasswordEncoded ? atob(s.lockPasswordEncoded) : "";
                diceRolled = !!s.diceRolled;

                // isi fields di locked page
                document.getElementById("lockedLoser").textContent = `Yang Kalah: ${loser}`;
                document.getElementById("lockedPunish").textContent = `Hukuman: ${s.punishText || "—"}`;
                document.getElementById("lockedDuration").textContent = `Durasi: ${finalDuration} menit`;

                // tampilkan locked page
                document.getElementById("gameArea").style.display = "none";
                document.getElementById("lockedPage").style.display = "flex";

                // disable tombol roll/lock agar tidak bingung
                document.getElementById("rollBtn").disabled = true;
                document.getElementById("lockBtn").disabled = true;
            }
        } catch (err) {
            console.warn("Gagal parse state:", err);
            localStorage.removeItem(STORAGE_KEY);
        }
    }
}

// ======================
// START DUEL
// ======================
function startDuel() {
    // clear any stored lock state: memulai duel baru -> hapus lock lama
    localStorage.removeItem(STORAGE_KEY);

    document.querySelectorAll("#punishPage, #passwordSetPage, #dicePage, #lockedPage")
        .forEach(el => el.style.display = "none");

    document.getElementById("gameArea").style.display = "block";

    winner = null;
    loser = null;
    ready = false;
    diceRolled = false;
    finalDuration = 0;
    lockPassword = "";

    document.getElementById("signal").textContent = "Tunggu sinyal...";
    document.getElementById("signal").style.color = "#ff3b3b";

    document.getElementById("rollBtn").disabled = false;
    document.getElementById("lockBtn").disabled = true;
    document.getElementById("diceResult").innerHTML = "";

    // reset punish box jika ada
    if (document.getElementById("punishBox"))
        document.getElementById("punishBox").textContent = "";

    let delay = Math.random() * 3000 + 2000;
    setTimeout(() => {
        ready = true;
        document.getElementById("signal").textContent = "GO!";
        document.getElementById("signal").style.color = "lime";
    }, delay);
}

// ======================
// KEY PRESS
// ======================
document.addEventListener("keydown", (e) => {
    if (!ready || winner) return;

    if (e.key.toLowerCase() === "a") { winner = "P1"; loser = "P2"; showPunishPage(); }
    if (e.key.toLowerCase() === "l") { winner = "P2"; loser = "P1"; showPunishPage(); }
});

// ======================
// SHOW PUNISH PAGE (RANDOM HUKUMAN)
// ======================
function showPunishPage() {
    document.getElementById("gameArea").style.display = "none";
    document.getElementById("punishPage").style.display = "block";

    document.getElementById("loserName").textContent = `${loser} KALAH`;

    // ambil satu hukuman random
    let randomPunish = PUNISH_LIST[Math.floor(Math.random() * PUNISH_LIST.length)];

    document.getElementById("punishBox").textContent = randomPunish;
}

// ======================
// PASSWORD SET
// ======================
function showPasswordSet() {
    document.getElementById("punishPage").style.display = "none";
    document.getElementById("passwordSetPage").style.display = "block";
}

function setPassword() {
    let p = document.getElementById("passInput").value;
    if (p.length < 1) {
        alert("Password tidak boleh kosong!");
        return;
    }
    lockPassword = p;
    showDice();
}

// ======================
// DICE PAGE (1 ROLL)
// ======================
function showDice() {
    document.getElementById("passwordSetPage").style.display = "none";
    document.getElementById("dicePage").style.display = "block";
}

function rollDice() {
    if (diceRolled) return;
    diceRolled = true;

    let dice = Math.floor(Math.random() * 6) + 1;
    finalDuration = dice * 2;

    document.getElementById("diceResult").innerHTML =
        `Dadu: <b>${dice}</b><br>Durasi awal: <b>${finalDuration} menit</b>`;

    document.getElementById("rollBtn").disabled = true;
    document.getElementById("lockBtn").disabled = false;
}

// ======================
// HELPERS: simpan/clear state
// ======================
function saveLockedState(punishText) {
    // encode password sederhana supaya tidak langsung terlihat (bukan enkripsi aman)
    const encodedPass = lockPassword ? btoa(lockPassword) : "";

    const state = {
        locked: true,
        loser: loser,
        punishText: punishText,
        finalDuration: finalDuration,
        diceRolled: diceRolled,
        lockPasswordEncoded: encodedPass,
        timestamp: Date.now()
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function clearLockedState() {
    localStorage.removeItem(STORAGE_KEY);
}

// ======================
// LOCK SCREEN
// ======================
function lockScreen() {
    if (!diceRolled) {
        alert("Lempar dadu dulu sebelum mengunci halaman.");
        return;
    }

    // ambil hukuman yang ditampilkan (punishBox)
    const punishText = document.getElementById("punishBox").textContent || "—";

    // simpan state ke localStorage
    saveLockedState(punishText);

    // hilangkan dicePage dan tampilkan lockedPage
    document.getElementById("dicePage").style.display = "none";

    document.getElementById("lockedLoser").textContent = `Yang Kalah: ${loser}`;
    document.getElementById("lockedPunish").textContent = `Hukuman: ${punishText}`;
    document.getElementById("lockedDuration").textContent = `Durasi: ${finalDuration} menit`;

    document.getElementById("unlockInput").value = "";
    document.getElementById("lockedPage").style.display = "flex";

    // disable tombol agar tidak bisa dimainkan lagi sampai unlock
    document.getElementById("rollBtn").disabled = true;
    document.getElementById("lockBtn").disabled = true;
}

// ======================
// UNLOCK (SALAH +2 MENIT)
// ======================
function unlock() {
    let tryPass = document.getElementById("unlockInput").value;

    if (tryPass === lockPassword) {
        // unlocked — bersihkan state dan sembunyikan locked page
        clearLockedState();
        document.getElementById("lockedPage").style.display = "none";
        alert("Unlock berhasil. Halaman terbuka.");
    } else {
        // jika salah, tambahkan durasi +2 menit, update localStorage & UI
        finalDuration += 2;
        document.getElementById("lockedDuration").textContent = `Durasi: ${finalDuration} menit`;

        // update stored state
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
            try {
                const s = JSON.parse(raw);
                s.finalDuration = finalDuration;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
            } catch (err) {
                console.warn("Gagal update stored duration:", err);
            }
        }

        alert("Password salah! Durasi bertambah +2 menit.");
    }
}

// ======================
// PANGGIL inisialisasi saat DOM siap
// ======================
document.addEventListener("DOMContentLoaded", initGame);
</script>


</body>
</html>
