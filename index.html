<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Reaction Duel + Dice + Password Lock (Single Roll)</title>

<style>
    body {
        background: #0d0000;
        color: #ff4d4d;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 30px;
        text-shadow: 0 0 6px #ff1c1c;
    }

    h1 {
        margin-bottom: 15px;
        font-size: 40px;
        text-shadow: 0 0 12px #ff0000;
    }

    button {
        padding: 15px 30px;
        font-size: 20px;
        border: 2px solid #ff1c1c;
        border-radius: 8px;
        cursor: pointer;
        background: #250000;
        color: #ffb3b3;
        margin: 10px;
        transition: 0.2s;
        box-shadow: 0 0 12px #ff1c1c55;
    }
    button[disabled]{
        opacity: 0.45;
        cursor: default;
        transform: none;
        box-shadow: none;
    }
    button:hover:not([disabled]) {
        background: #400000;
        transform: scale(1.05);
        box-shadow: 0 0 20px #ff1c1c;
    }

    #gameArea, 
    #punishPage, 
    #passwordSetPage, 
    #dicePage, 
    #lockedPage {
        display: none;
        margin-top: 40px;
    }

    #signal {
        margin-top: 40px;
        font-size: 50px;
        font-weight: bold;
        height: 80px;
    }

    #punishBox {
        background: #1b0000;
        padding: 25px;
        border-radius: 10px;
        margin-top: 30px;
        border: 2px solid #700000;
        box-shadow: 0 0 20px #ff000055;
        width: 70%;
        margin-left: auto;
        margin-right: auto;
        font-size: 22px;
        color: #ffdddd;
    }

    #diceResult {
        margin-top: 25px;
        font-size: 34px;
        font-weight: bold;
        text-shadow: 0 0 12px #ff4444;
    }

    /* LOCK SCREEN */
    #lockedPage {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(60,0,0,0.95);
        color: #ff5a5a;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-shadow: 0 0 12px #ff0000;
        z-index: 9999;
        padding: 20px;
    }

    #lockedPage h1 {
        font-size: 48px;
        color: #ff1a1a;
        text-shadow: 0 0 20px #ff0000;
        margin-bottom: 25px;
    }

    input {
        padding: 10px 15px;
        font-size: 18px;
        border-radius: 8px;
        border: 2px solid #ff0000;
        outline: none;
        background: #2b0000;
        color: #ffcccc;
        margin-top: 10px;
        text-align: center;
        box-shadow: 0 0 10px #ff000055;
    }

    .lockInfo {
        font-size: 22px;
        margin-top: 10px;
        color: #ffb3b3;
        text-shadow: 0 0 12px #ff4444;
    }

    .note { font-size: 14px; color: #ffb3b3; margin-top: 10px; opacity: 0.9; }
</style>
</head>
<body>

<h1>REACTION DUEL</h1>

<button onclick="startDuel()">Mulai Duel</button>

<!-- GAME AREA -->
<div id="gameArea">
    <h2>Bersiap...</h2>
    <div id="signal"></div>
    <p>P1 = tekan <b>A</b> | P2 = tekan <b>L</b></p>
    <button onclick="pressP1()">Player 1</button>
    <button onclick="pressP2()">Player 2</button>

</div>

<!-- PUNISH PAGE -->
<div id="punishPage">
    <h2>Pemain Kalah:</h2>
    <h3 id="loserName"></h3>
    <div id="punishBox"></div>
    <button onclick="showPasswordSet()">Lanjut Buat Password</button>
</div>

<!-- PASSWORD SET -->
<div id="passwordSetPage">
    <h2>Pemenang, buat password untuk mengunci halaman:</h2>
    <input id="passInput" type="password" placeholder="Password...">
    <br><br>
    <button onclick="setPassword()">Set Password</button>
</div>

<!-- DICE PAGE -->
<div id="dicePage">
    <h2>Lempar Dadu (hanya 1 kali)</h2>
    <button id="rollBtn" onclick="rollDice()">Lempar!</button>
    <div id="diceResult"></div>
    <br>
    <button id="lockBtn" onclick="lockScreen()" disabled>Kunci Halaman</button>
</div>

<!-- LOCKED PAGE -->
<div id="lockedPage">
    <h1>HALAMAN TERKUNCI</h1>
    <div class="lockInfo" id="lockedLoser"></div>
    <div class="lockInfo" id="lockedPunish"></div>
    <div class="lockInfo" id="lockedDuration"></div>
    <br><br>
    <input type="password" id="unlockInput" placeholder="Password...">
    <br><br>
    <button onclick="unlock()">UNLOCK</button>
    <div class="note">Setiap kali memasukkan password salah, durasi bertambah +2 menit.</div>
</div>

<script>
// ======================
// DATA HUKUMAN
// ======================
const PUNISH_LIST = [
    "Push up 10x",
    "Plank 1 menit",
    "Jalan jongkok 1 menit",
    "Berdiri satu kaki 2 menit",
    "Tidak boleh pegang HP 5 menit",
        "bdsm full tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full  tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full 5 jam tanpa istirahat.",
    "anal punishment 30 menit",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "vibrator 1x24 jam"
];

// ======================
// VARIABEL GLOBAL
// ======================
let ready = false;
let winner = null;
let loser = null;
let lockPassword = "";
let finalDuration = 0;
let diceRolled = false;

// ======================
// LOAD STATE DARI REFRESH
// ======================
window.onload = () => {
    const saved = localStorage.getItem("duelLock");
    if (!saved) return;

    const data = JSON.parse(saved);
    const now = Date.now();
    const endTime = data.start + data.duration * 60000;

    if (now < endTime) {
        loser = data.loser;
        finalDuration = Math.ceil((endTime - now) / 60000);
        showLockedAfterRefresh(data.punish);
    } else {
        localStorage.removeItem("duelLock");
    }
};

// ======================
// START DUEL
// ======================
function startDuel() {
    document.querySelectorAll("#punishPage, #passwordSetPage, #dicePage, #lockedPage")
        .forEach(el => el.style.display = "none");

    document.getElementById("gameArea").style.display = "block";

    winner = null;
    loser = null;
    ready = false;
    diceRolled = false;
    finalDuration = 0;
    lockPassword = "";

    document.getElementById("signal").textContent = "Tunggu sinyal...";
    document.getElementById("signal").style.color = "#ff3b3b";

    document.getElementById("rollBtn").disabled = false;
    document.getElementById("lockBtn").disabled = true;
    document.getElementById("diceResult").innerHTML = "";

    let delay = Math.random() * 3000 + 2000;

    setTimeout(() => {
        ready = true;
        document.getElementById("signal").textContent = "GO!";
        document.getElementById("signal").style.color = "lime";
    }, delay);
}

// ======================
// TOMBOL P1 / P2 (HP friendly)
// ======================
function pressP1() {
    if (!ready || winner) return;
    winner = "P1"; loser = "P2";
    showPunishPage();
}
function pressP2() {
    if (!ready || winner) return;
    winner = "P2"; loser = "P1";
    showPunishPage();
}

// ======================
// PILIH HUKUMAN RANDOM
// ======================
function showPunishPage() {
    const pick = PUNISH_LIST[Math.floor(Math.random() * PUNISH_LIST.length)];

    document.getElementById("gameArea").style.display = "none";
    document.getElementById("punishPage").style.display = "block";

    document.getElementById("loserName").textContent = `${loser} KALAH`;
    document.getElementById("punishBox").textContent = pick;

    // simpan hukuman yang terpilih
    document.getElementById("selectedPunish").value = pick;
}

// ======================
// PASSWORD SET
// ======================
function showPasswordSet() {
    document.getElementById("punishPage").style.display = "none";
    document.getElementById("passwordSetPage").style.display = "block";
}

function setPassword() {
    let p = document.getElementById("passInput").value;
    if (p.length < 1) {
        alert("Password tidak boleh kosong!");
        return;
    }
    lockPassword = p;
    showDice();
}

// ======================
// DICE PAGE
// ======================
function showDice() {
    document.getElementById("passwordSetPage").style.display = "none";
    document.getElementById("dicePage").style.display = "block";
}

function rollDice() {
    if (diceRolled) return;
    diceRolled = true;

    let dice = Math.floor(Math.random() * 6) + 1;
    finalDuration = dice * 2;

    document.getElementById("diceResult").innerHTML =
        `Dadu: <b>${dice}</b><br>Durasi awal: <b>${finalDuration} menit</b>`;

    document.getElementById("rollBtn").disabled = true;
    document.getElementById("lockBtn").disabled = false;
}

// ======================
// LOCK SCREEN (simpan ke localStorage)
// ======================
function lockScreen() {
    if (!diceRolled) {
        alert("Lempar dadu dulu!");
        return;
    }

    const punish = document.getElementById("selectedPunish").value;

    // Simpan agar tidak hilang jika di-refresh
    localStorage.setItem("duelLock", JSON.stringify({
        loser: loser,
        punish: punish,
        duration: finalDuration,
        start: Date.now(),
        password: lockPassword
    }));

    showLockedAfterRefresh(punish);
}

function showLockedAfterRefresh(punish) {
    document.getElementById("dicePage").style.display = "none";

    document.getElementById("lockedLoser").textContent = `Yang Kalah: ${loser}`;
    document.getElementById("lockedPunish").textContent = `Hukuman: ${punish}`;
    document.getElementById("lockedDuration").textContent =
        `Durasi tersisa: ${finalDuration} menit`;

    document.getElementById("unlockInput").value = "";
    document.getElementById("lockedPage").style.display = "flex";
}

// ======================
// UNLOCK
// ======================
function unlock() {
    const saved = JSON.parse(localStorage.getItem("duelLock"));
    if (!saved) return;

    let tryPass = document.getElementById("unlockInput").value;

    if (tryPass === saved.password) {
        localStorage.removeItem("duelLock");
        document.getElementById("lockedPage").style.display = "none";
        alert("Unlock berhasil!");
    } else {
        saved.duration += 2;
        finalDuration = saved.duration;

        saved.start = Date.now(); // reset waktu
        localStorage.setItem("duelLock", JSON.stringify(saved));

        document.getElementById("lockedDuration").textContent =
            `Durasi tersisa: ${finalDuration} menit`;

        alert("Password salah! +2 menit");
    }
}
</script>

<!-- Hidden untuk simpan hukuman -->
<input type="hidden" id="selectedPunish">



</body>
</html>
