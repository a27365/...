<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Challenge</title>

<style>
body {
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
}
button {
    background: #ff3b3b;
    border: none;
    padding: 12px 20px;
    border-radius: 10px;
    color: white;
    margin: 10px;
    font-size: 17px;
}
#lockedPage {
    display: none;
    flex-direction: column;
    gap: 15px;
    margin-top: 50px;
}
#historyBox {
    background: #222;
    padding: 15px;
    border-radius: 10px;
    max-height: 300px;
    overflow-y: auto;
    text-align: left;
}
</style>
</head>
<body>

<h2> RANDOM punishment</h2>

<!-- START BUTTON -->
<button onclick="startChallenge()">GET Punishment</button>
<p>good luck poor slave</p>


<!-- CHALLENGE PAGE -->
<div id="challengePage" style="display:none;">
    <h2>punishment</h2>
    <div id="challengeText" style="font-size:20px;margin:20px 0;"></div>
    <button onclick="showPasswordSet()">Lanjut</button>
</div>

<!-- PASSWORD SET PAGE -->
<div id="passwordSetPage" style="display:none;">
    <h3>Buat Password Untuk Kunci</h3>
    <input id="passInput" type="password">
    <br><br>
    <button onclick="setPassword()">Set Password</button>
</div>

<!-- DICE PAGE -->
<div id="dicePage" style="display:none;">
    <h3>Lempar Dadu</h3>
    <button id="rollBtn" onclick="rollDice()">ROLL</button>
    <div id="diceResult" style="margin-top:15px;"></div>
    <br>
    <button id="lockBtn" onclick="lockScreen()" disabled>Kunci Halaman</button>
</div>

<!-- LOCK PAGE -->
<div id="lockedPage">
    <h2>ðŸ”’ Halaman Terkunci</h2>
    <div id="lockedChallenge"></div>
    <div id="lockedDuration"></div>
    <input id="unlockInput" type="password" placeholder="Masukkan Password">
    <button onclick="unlock()">UNLOCK</button>
</div>

<hr>

<!-- HISTORY -->
<button onclick="showHistory()">Lihat History</button>
<div id="historyBox"></div>

<input type="hidden" id="selectedChallenge">

<script>
// ======================
// LIST CHALLENGE
// ======================
const CHALLENGE_LIST = [
    "Plank 1 menit",
    "Baca 1 halaman buku",
    "Push up 15x",
    "Squat 20x",
    "Jalan cepat 3 menit",
    "Hafalan 5 baris",
    "Meditasi 2 menit",
    "Bersih-bersih meja 1 menit",
        "bdsm full tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full  tanpa istirahat.",
    "anal punishment 30 menit x hasil",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "bdsm full 5 jam tanpa istirahat.",
    "anal punishment 30 menit",
    "kunci vibrator dalam vagina dengan chasitybelt",
    "blowjob.",
    "jilat pantat",
    "anal lock ",
    "jilat vagina",
    "minum sperma",
    "minum kencing",
    "gang bang",
    "bdsm cosplay",
    "spekulum dan paku tumpul di vagina",
    "pelatihan anjing",
    "pameran bdsm",
    "mengikuti kemauan dominan",
    "punisht vagina",
    "try no cum 15 menit",
    "punisht vagina",
    "vagina lock",
    "streaming bdsm",
    "masturbasi mandiri",
    "lilin di seluruh tubuh",
    "vibrator 1x24 jam"
];

let lockPassword = "";
let finalDuration = 0;

// ======================
// CEK JIKA MASIH TERKUNCI SAAT REFRESH
// ======================
window.onload = () => {
    const saved = localStorage.getItem("challengeLock");
    if (!saved) return;

    const data = JSON.parse(saved);
    const now = Date.now();
    const endTime = data.start + data.duration * 60000;

    if (now < endTime) {
        finalDuration = Math.ceil((endTime - now) / 60000);
        showLockedAfterRefresh(data.challenge);
    } else {
        localStorage.removeItem("challengeLock");
    }
};

// ======================
// START CHALLENGE
// ======================
function startChallenge() {

    document.querySelectorAll("#challengePage,#passwordSetPage,#dicePage,#lockedPage")
        .forEach(el => el.style.display = "none");

    const pick = CHALLENGE_LIST[Math.floor(Math.random() * CHALLENGE_LIST.length)];

    document.getElementById("challengeText").textContent = pick;
    document.getElementById("selectedChallenge").value = pick;

    document.getElementById("challengePage").style.display = "block";
}

// ======================
// PASSWORD SET
// ======================
function showPasswordSet() {
    document.getElementById("challengePage").style.display = "none";
    document.getElementById("passwordSetPage").style.display = "block";
}

function setPassword() {
    let p = document.getElementById("passInput").value;
    if (p.length < 1) {
        alert("Password tidak boleh kosong!");
        return;
    }
    lockPassword = p;
    showDice();
}

// ======================
// DICE PAGE
// ======================
function showDice() {
    document.getElementById("passwordSetPage").style.display = "none";
    document.getElementById("dicePage").style.display = "block";
}

function rollDice() {
    let dice = Math.floor(Math.random() * 6) + 1;
    finalDuration = dice * 2;

    document.getElementById("diceResult").innerHTML =
        `Dadu: <b>${dice}</b><br>Durasi: <b>${finalDuration} menit</b>`;

    document.getElementById("rollBtn").disabled = true;
    document.getElementById("lockBtn").disabled = false;
}

// ======================
// LOCK SCREEN
// ======================
function lockScreen() {
    const challenge = document.getElementById("selectedChallenge").value;

    localStorage.setItem("challengeLock", JSON.stringify({
        challenge: challenge,
        duration: finalDuration,
        start: Date.now(),
        password: lockPassword
    }));

    showLockedAfterRefresh(challenge);
}

function showLockedAfterRefresh(challenge) {
    document.querySelectorAll("#challengePage,#passwordSetPage,#dicePage")
        .forEach(el => el.style.display = "none");

    document.getElementById("lockedChallenge").textContent = `Challenge: ${challenge}`;
    document.getElementById("lockedDuration").textContent = `Sisa Durasi: ${finalDuration} menit`;

    document.getElementById("lockedPage").style.display = "flex";
}

// ======================
// UNLOCK
// ======================
function unlock() {
    const saved = JSON.parse(localStorage.getItem("challengeLock"));
    if (!saved) return;

    let tryPass = document.getElementById("unlockInput").value;

    if (tryPass === saved.password) {

        // SIMPAN HISTORY
        saveLog({
            time: new Date().toLocaleString(),
            challenge: saved.challenge,
            duration: saved.duration
        });

        localStorage.removeItem("challengeLock");
        document.getElementById("lockedPage").style.display = "none";

        alert("Selesai! Mantap!");
    } else {
        saved.duration += 2;
        finalDuration = saved.duration;

        saved.start = Date.now();
        localStorage.setItem("challengeLock", JSON.stringify(saved));

        document.getElementById("lockedDuration").textContent =
            `Sisa Durasi: ${finalDuration} menit`;

        alert("Password salah! +2 menit");
    }
}

// ======================
// HISTORY
// ======================
function saveLog(data) {
    let logs = JSON.parse(localStorage.getItem("challengeLogs") || "[]");
    logs.push(data);
    localStorage.setItem("challengeLogs", JSON.stringify(logs));
}

function showHistory() {
    let logs = JSON.parse(localStorage.getItem("challengeLogs") || "[]");

    const box = document.getElementById("historyBox");
    box.innerHTML = "";

    if (logs.length === 0) {
        box.innerHTML = "<p>Belum ada history.</p>";
        return;
    }

    logs.forEach((log, index) => {
        box.innerHTML += `
            <div class="log-item">
                <b>Challenge ${index + 1}</b><br>
                Waktu: ${log.time}<br>
                Tugas: ${log.challenge}<br>
                Durasi: ${log.duration} menit
                <hr>
            </div>
        `;
    });
}
</script>

</body>
</html>
